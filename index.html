<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>éŠ€é­‚å¼ãƒã‚¿å¸³ï¼šè«–ç‚¹æ­»å®ˆver.</title>
  <style>
    body { font-family: 'Noto Sans JP', sans-serif; background: #f7f7f7; color: #222; margin: 0; padding: 0 0 2em 0;}
    h1, h2 { margin: 1em 0 .6em; }
    .block { margin-bottom: 2em; padding: 1em; background: #fff; border-radius: 16px; box-shadow: 0 2px 10px #ddd4; }
    .fixed-header {
      position: sticky; top: 0; left: 0; right: 0;
      z-index: 999;
      background: #fffbee;
      border-bottom: 2px solid #fa0;
      padding: .7em 2em .4em 2em;
      margin-bottom: .5em;
      box-shadow: 0 1px 8px #ffe8;
      display: flex;
      align-items: center;
      gap: 1em;
    }
    #titleInput { font-size:1.25em; font-weight:bold; width: 55%; padding: .4em; border-radius: 7px; border: 1.5px solid #aaa; background: #fff6da;}
    .memo-block textarea { width: 98%; border-radius: 8px; font-size:1em;}
    .kw-list { margin:.4em 0 0 .3em; display:flex; flex-wrap:wrap; gap:.3em;}
    .kw-btn {
      background: #e7f3ff; border: 1px solid #8fc2ff; border-radius: 10px;
      padding: .25em .7em; font-size:1em; cursor: pointer; margin-bottom: .1em;
      transition:.1s;
    }
    .kw-btn:hover { background: #cfe7ff; border-color:#3a8fff; }
    #ideaInput { width: 80%; padding: .5em; border-radius: 8px; border: 1px solid #aaa;}
    #addIdea { padding: .5em 1em; border-radius: 8px; background: #f0e68c; border: none; margin-left: .5em;}
    #treeContainer details { margin-bottom: .8em; border-left: 4px solid #aaf; background: #fafaff; border-radius: 8px;}
    summary { font-weight: bold; font-size: 1.06em; padding: .3em .8em;}
    .hotspot { border-left: 4px solid #f55 !important; background: #fff5f5 !important;}
    .question { margin: .4em 0 .2em 1.6em; }
    .question textarea.reply { width: 90%; margin-top: .3em; border-radius: 8px; border: 1px solid #ccc;}
    .mindmap-canvas-box {
      position: relative; min-height: 380px; background: #fcfcfc; border: 1.5px dashed #aaa;
      border-radius: 12px; margin-bottom: 1em; overflow: auto;
    }
    #mindMapCanvas {
      display: block; width: 100%; min-width: 600px; min-height: 360px; height: 400px; background: transparent; cursor: grab;
    }
    .mind-node-dot {
      position: absolute; padding: .4rem .8rem; border: 2px solid #999; border-radius: 16px; background: #fff;
      cursor: move; font-weight: bold; user-select: none; box-shadow: 2px 4px 8px #eee8; text-align: center;
      transition: background 0.15s, border-color 0.15s;
    }
    .mind-node-dot.selected { border-color: #3477ff; background: #e3edff; }
    .mind-node-dot:hover { background: #ffd; border-color: #555; z-index: 2;}
    .mindmap-ctrls { margin: .8em 0 .5em 0; }
    #nodeInput, #parentSelect { padding: .5em; border-radius: 8px; border: 1px solid #aaa;}
    #nodeInput { width: 32%; }
    #addNodeBtn { padding: .5em 1em; border-radius: 8px; background: #d1ebf5; border: none; margin-left: .5em;}
    #resetBtn, #saveBtn, #loadBtn { padding: .5em 1em; border-radius: 8px; border: none; margin-left: .5em;}
    #resetBtn { background: #f99; color: #fff;}
    #saveBtn { background: #7ad67a; color: #fff;}
    #loadBtn { background: #49bbee; color: #fff;}
    @media (max-width: 700px) {
      #titleInput, #ideaInput, #nodeInput, #parentSelect { width: 92%; }
      .block { padding: .5em; }
      #mindMapCanvas { min-width: 340px;}
      .fixed-header { padding-left:.2em; padding-right:.2em;}
    }
  </style>
</head>
<body>
  <div class="fixed-header">
    <span style="font-size:1.3em; font-weight:bold;">ğŸ“ ã‚¿ã‚¤ãƒˆãƒ«ï¼š</span>
    <input type="text" id="titleInput" placeholder="è«–ç‚¹ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆã“ã“ã‚’è»¸ã«ï¼ï¼‰" autocomplete="off" />
    <span id="titleDisplay" style="color:#f80;font-size:.97em;"></span>
  </div>
  <div class="block memo-block">
    <h2>ğŸ“š æƒ…å ±ãƒ¡ãƒ¢ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</h2>
    <textarea id="infoMemo" rows="4" placeholder="#ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ #æ ¹æ‹  ãªã©ã€è¨˜æ†¶ã—ãŸã„æƒ…å ±ã‚’ä½•ã§ã‚‚æ›¸ããªãã‚Œï¼ï¼ˆ#ã‚’ä»˜ã‘ã‚‹ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ‰±ã„ï¼‰"></textarea>
    <div style="margin:.6em 0 .2em .1em;font-weight:bold; color:#278;">æŠ½å‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼š</div>
    <div class="kw-list" id="kwList"></div>
  </div>
  <div class="block">
    <h2>ğŸ’¡ ã‚¢ã‚¤ãƒ‡ã‚¢å…¥åŠ›ï¼ˆãƒ¡ãƒ¢ã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è¦‹ãªãŒã‚‰æ•´ç†ï¼ï¼‰</h2>
    <input type="text" id="ideaInput" placeholder="æ€ã„ã¤ãã‚’ã©ã‚“ã©ã‚“æ›¸ãè¾¼ã‚ï¼" />
    <button id="addIdea">â• è¿½åŠ </button>
  </div>
  <div class="block">
    <h2>ğŸ¤– AIãƒ„ãƒƒã‚³ãƒŸï¼†æ€è€ƒãƒ„ãƒªãƒ¼ï¼ˆç¨®åˆ¥å¾©æ´»ï¼ï¼‰</h2>
    <div id="treeContainer"></div>
  </div>
  <div class="block">
    <h2>ğŸ§  è‡ªç”±ç™ºæƒ³ãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ—ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰é¸æŠ&è‡ªç”±å…¥åŠ›OKï¼‰</h2>
    <div class="mindmap-ctrls">
      <input type="text" id="nodeInput" placeholder="ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ â€¦" />
      <select id="parentSelect"><option value="">ï¼ˆãƒ«ãƒ¼ãƒˆã¨ã—ã¦è¿½åŠ ï¼‰</option></select>
      <button id="addNodeBtn">â• è¿½åŠ </button>
      <span style="margin-left:1.2em; font-size:.98em; color:#278;">ã¾ãŸã¯ã€ä¸‹ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼</span>
      <div class="kw-list" id="kwMapList"></div>
    </div>
    <div class="mindmap-canvas-box" style="position:relative;">
      <canvas id="mindMapCanvas"></canvas>
      <div id="mindNodesLayer" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"></div>
    </div>
    <small>ãƒãƒ¼ãƒ‰è¿½åŠ â†’è¦ªãƒãƒ¼ãƒ‰é¸æŠâ†’çŸ¢å°ç·šã§å¯è¦–åŒ–ï¼ ãƒ‰ãƒ©ãƒƒã‚°ã§ä¸¦ã¹æ›¿ãˆOKï¼ï¼ˆä»®ãƒ»PCæ¨å¥¨ï¼‰</small>
  </div>
  <div class="block">
    <h2>ğŸ¤ ã¾ã¨ã‚ï¼†ã‚¹ã‚³ã‚¢è©•ä¾¡</h2>
    <div id="summaryBox" style="background:#f8f8ff; padding:1em; border-radius:12px;"></div>
    <button id="scoreBtn">ğŸ“ ã¾ã¨ã‚ã¦ã‚¹ã‚³ã‚¢è©•ä¾¡</button>
    <button id="saveBtn">ğŸ’¾ ä¿å­˜</button>
    <button id="loadBtn">ğŸ“‚ å¾©å…ƒ</button>
    <button id="resetBtn">ğŸ”„ å…¨éƒ¨ãƒªã‚»ãƒƒãƒˆ</button>
    <div style="margin-top:.6em;font-size:.97em;color:#888;">â€»ä¿å­˜ãƒ»å¾©å…ƒã¯ã“ã®ç«¯æœ«ãƒ»ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿æœ‰åŠ¹ï¼ã‚¿ãƒ–ã®å¾©æ´»ã‚„ãƒªãƒ­ãƒ¼ãƒ‰ã‚‚OKã ãœï¼</div>
  </div>

  <script>
    // ---- ã‚¿ã‚¤ãƒˆãƒ«æ¬„ç›£è¦– ----
    let currentTitle = "";
    const titleInput = document.getElementById("titleInput");
    const titleDisplay = document.getElementById("titleDisplay");
    titleInput.addEventListener("input", ()=>{
      currentTitle = titleInput.value;
      titleDisplay.textContent = currentTitle ? `ï¼ˆå¸¸ã«ã‚³ãƒ¬ã‚’å¿˜ã‚Œã‚‹ãªã‚ˆï¼ï¼‰` : '';
    });

    // ---- æƒ…å ±ãƒ¡ãƒ¢ï¼ˆ#ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡ºï¼‰ ----
    let memoKeywords = [];
    function extractKeywords(text){
      const found = [...text.matchAll(/#([^\s#]+)/g)];
      return Array.from(new Set(found.map(x=>x[1])));
    }
    function updateKeywordUI() {
      const kwList = document.getElementById("kwList");
      kwList.innerHTML = "";
      memoKeywords.forEach(kw=>{
        const btn = document.createElement("button");
        btn.textContent = "#" + kw;
        btn.className = "kw-btn";
        btn.onclick = ()=>navigator.clipboard.writeText("#"+kw);
        btn.title = "ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ”ãƒ¼";
        kwList.appendChild(btn);
      });
      // ãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ—ç”¨ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰UIã‚‚ä½œã‚‹
      const kwMapList = document.getElementById("kwMapList");
      kwMapList.innerHTML = "";
      memoKeywords.forEach(kw=>{
        const btn = document.createElement("button");
        btn.textContent = "#" + kw;
        btn.className = "kw-btn";
        btn.onclick = ()=>{
          document.getElementById("nodeInput").value = kw;
        };
        kwMapList.appendChild(btn);
      });
    }
    document.getElementById("infoMemo").addEventListener("input", function(){
      memoKeywords = extractKeywords(this.value);
      updateKeywordUI();
      renderTree();
    });

    // ---- AIãƒ„ãƒƒã‚³ãƒŸç”¨ ----
    const defaultQuestions = [
      "ãã‚Œã£ã¦ä½•ã§ãã†è€ƒãˆãŸï¼Ÿ",
      "ä»–ã®è¦–ç‚¹ã§è¦‹ã‚‹ã¨ã©ã†å¤‰ã‚ã‚‹ï¼Ÿ",
      "æœ¬å½“ã«å¿…è¦ãªæ¡ä»¶ã£ã¦ä½•ã ï¼Ÿ"
    ];
    const devilsAdvocate = [
      "é€†ã®ç«‹å ´ã‹ã‚‰è¦‹ãŸã‚‰ã©ã†ãªã‚‹ï¼Ÿ",
      "ã“ã®ã¾ã¾ã ã¨çŸ›ç›¾ãŒç”Ÿã¾ã‚Œãªã„ã‹ï¼Ÿ",
      "å¼±ç‚¹ã‚„æŠœã‘ç©´ã¯ãªã„ã‹ï¼Ÿ"
    ];
    let ideaList = [];
    document.getElementById("addIdea").onclick = function() {
      const input = document.getElementById("ideaInput");
      const text = input.value.trim();
      if (!text) return;
      ideaList.push(text);
      renderTree();
      input.value = "";
    };
    function renderTree() {
      const container = document.getElementById("treeContainer");
      container.innerHTML = "";
      const infoMemo = document.getElementById("infoMemo").value;
      const memoTags = infoMemo.match(/#([^\s#]+)/g) || [];
      ideaList.forEach(line => {
        const section = document.createElement("details");
        section.open = true;
        const summary = document.createElement("summary");
        summary.innerHTML = `ğŸ“ ${line}`;
        section.appendChild(summary);
        const categories = {
          "ğŸ“Œ ç™ºæƒ³ã‚’æ·±ã‚ã‚‹": [rand(defaultQuestions)],
          "ğŸ§± è«–ç†ã‚’ç–‘ã†": [rand(devilsAdvocate)],
          "ğŸ“š æƒ…å ±ã¨ç…§åˆ": []
        };
        const lowerLine = line.toLowerCase();
        const contradiction = memoTags.find(k => !lowerLine.includes(k.toLowerCase().replace("#", "")));
        if (contradiction) {
          categories["ğŸ“š æƒ…å ±ã¨ç…§åˆ"].push(`æƒ…å ±ãƒ¡ãƒ¢ã®ã€Œ${contradiction}ã€ã¨çŸ›ç›¾ã—ã¦ãªã„ï¼Ÿ`);
        }
        Object.entries(categories).forEach(([label, questions]) => {
          if (questions.length) {
            const cat = document.createElement("div");
            const catLabel = document.createElement("strong");
            catLabel.textContent = label;
            cat.appendChild(catLabel);
            questions.forEach(q => {
              const div = document.createElement("div");
              div.className = "question";
              div.textContent = "ğŸ¤– " + q;
              const replyBox = document.createElement("textarea");
              replyBox.rows = 2;
              replyBox.placeholder = "ã‚ãªãŸã®è¿”ç­”ã‚’æ›¸ã„ã¦ãã‚Œâ€¦";
              replyBox.className = "reply";
              div.appendChild(replyBox);
              cat.appendChild(div);
            });
            section.appendChild(cat);
          }
        });
        if (Object.values(categories).flat().length >= 3)
          section.classList.add("hotspot");
        container.appendChild(section);
      });
    }
    const rand = arr => arr[Math.floor(Math.random() * arr.length)];

    // ---- ãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ— ----
    let mindNodes = [];
    let mindNodeId = 0;
    const mindMapCanvas = document.getElementById("mindMapCanvas");
    const mindNodesLayer = document.getElementById("mindNodesLayer");
    function resizeCanvas() {
      mindMapCanvas.width = mindMapCanvas.parentElement.clientWidth;
      mindMapCanvas.height = mindMapCanvas.parentElement.clientHeight;
      mindNodesLayer.style.width = mindMapCanvas.width + "px";
      mindNodesLayer.style.height = mindMapCanvas.height + "px";
      renderMindMap();
    }
    window.addEventListener("resize", resizeCanvas);

    function addMindNodeGUI(text, parentId) {
      let x = mindMapCanvas.width/2 + (Math.random()-0.5)*40;
      let y = mindMapCanvas.height/2 + (Math.random()-0.5)*40;
      if (parentId) {
        const parent = mindNodes.find(n=>n.id==parentId);
        if (parent) {
          x = parent.x + 120 + (Math.random()-0.5)*40;
          y = parent.y + (Math.random()-0.5)*60;
        }
      }
      mindNodeId++;
      mindNodes.push({id: mindNodeId, text, x, y, parentId: parentId||null});
      updateParentSelect();
      renderMindMap();
    }
    document.getElementById("addNodeBtn").onclick = function() {
      const input = document.getElementById("nodeInput");
      const parentSel = document.getElementById("parentSelect");
      const text = input.value.trim();
      if (!text) return;
      const parentId = parentSel.value ? Number(parentSel.value) : null;
      addMindNodeGUI(text, parentId);
      input.value = "";
      parentSel.selectedIndex = 0;
    };
    function updateParentSelect() {
      const sel = document.getElementById("parentSelect");
      const prev = sel.value;
      sel.innerHTML = '<option value="">ï¼ˆãƒ«ãƒ¼ãƒˆã¨ã—ã¦è¿½åŠ ï¼‰</option>';
      mindNodes.forEach(node=>{
        const opt = document.createElement("option");
        opt.value = node.id;
        opt.textContent = node.text.length>20?node.text.slice(0,20)+"â€¦":node.text;
        sel.appendChild(opt);
      });
      if(prev) sel.value = prev;
    }
    function renderMindMap() {
      const ctx = mindMapCanvas.getContext("2d");
      ctx.clearRect(0,0, mindMapCanvas.width, mindMapCanvas.height);
      mindNodes.forEach(node=>{
        if(node.parentId){
          const parent = mindNodes.find(n=>n.id==node.parentId);
          if(parent){
            ctx.strokeStyle = "#8bb3f5";
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(parent.x+55, parent.y+25);
            ctx.lineTo(node.x+55, node.y+25);
            ctx.stroke();
            ctx.fillStyle="#3477ff";
            const angle = Math.atan2(node.y-parent.y, node.x-parent.x);
            const arrowX = node.x+55-(Math.cos(angle)*22);
            const arrowY = node.y+25-(Math.sin(angle)*22);
            ctx.beginPath();
            ctx.moveTo(arrowX, arrowY);
            ctx.lineTo(arrowX-6*Math.cos(angle-Math.PI/6), arrowY-6*Math.sin(angle-Math.PI/6));
            ctx.lineTo(arrowX-6*Math.cos(angle+Math.PI/6), arrowY-6*Math.sin(angle+Math.PI/6));
            ctx.closePath();
            ctx.fill();
          }
        }
      });
      mindNodesLayer.innerHTML="";
      mindNodes.forEach(node=>{
        const div = document.createElement("div");
        div.className = "mind-node-dot";
        div.textContent = node.text;
        div.style.left = node.x+"px";
        div.style.top = node.y+"px";
        div.style.background = `hsl(${node.id*67%360}, 75%, 90%)`;
        div.style.pointerEvents = "auto";
        div.onmousedown = function(e){
          let offsetX = e.clientX - node.x;
          let offsetY = e.clientY - node.y;
          function onMove(ev){
            node.x = Math.max(10,Math.min(mindMapCanvas.width-110, ev.clientX - offsetX));
            node.y = Math.max(10,Math.min(mindMapCanvas.height-60, ev.clientY - offsetY));
            renderMindMap();
          }
          function onUp(){ document.removeEventListener("mousemove",onMove); document.removeEventListener("mouseup",onUp);}
          document.addEventListener("mousemove",onMove);
          document.addEventListener("mouseup",onUp);
        };
        mindNodesLayer.appendChild(div);
      });
    }
    window.addEventListener("DOMContentLoaded", ()=>{
      resizeCanvas();
      memoKeywords = extractKeywords(document.getElementById("infoMemo").value);
      updateKeywordUI();
      renderTree();
      // ã‚ªãƒ¼ãƒˆãƒ­ãƒ¼ãƒ‰ã—ãŸã„ãªã‚‰ä¸‹è¡Œã®ã‚³ãƒ¡ãƒ³ãƒˆå¤–ã™
      // loadData();
    });

    // ---- ã¾ã¨ã‚ï¼†ã‚¹ã‚³ã‚¢è©•ä¾¡ ----
    document.getElementById("scoreBtn").onclick = function() {
      const ideas = ideaList;
      const nodes = mindNodes;
      let evalScore = Math.round((ideas.length + nodes.length*1.2) * 7 + Math.random()*15);
      let comment = "ã¾ã¨ã‚ã‚‹ã¨â€¦\n";
      comment += "ãƒ»ã‚¿ã‚¤ãƒˆãƒ«: " + (currentTitle||"(æœªè¨­å®š)") + "\n";
      comment += "ãƒ»ã‚¢ã‚¤ãƒ‡ã‚¢ï¼ˆæ€è€ƒãƒ„ãƒªãƒ¼ï¼‰: " + ideas.length + "å€‹\n";
      comment += "ãƒ»ç™ºæƒ³ãƒãƒ¼ãƒ‰ï¼ˆãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒãƒ—ï¼‰: " + nodes.length + "å€‹\n";
      comment += "éŠ€ã•ã‚“çš„ãƒ­ã‚¸ãƒƒã‚¯åº¦ï¼š" + evalScore + "ç‚¹/100ç‚¹ï¼\n";
      comment += "â€¦ã¾ã€ã‚ªãƒ¬çš„ã«ã¯æº€ç‚¹ã ã‘ã©ãªã€‚ç¹‹ã’ãŸåˆ†ã ã‘å®‡å®™ã‚‚åºƒãŒã‚‹ã£ã¦ã‚‚ã‚“ã‚ˆã€‚";
      document.getElementById("summaryBox").textContent = comment;
    };

    // ==== ä¿å­˜ãƒ»å¾©å…ƒã¯localStorageä¸€æœ¬ï¼====
    const STORAGE_KEY = "gintama_idea_data_v2";
    document.getElementById("saveBtn").onclick = function(){
      const data = {
        title: titleInput.value,
        info: document.getElementById("infoMemo").value,
        ideas: ideaList,
        mindNodes: mindNodes,
        mindNodeId: mindNodeId
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
      alert("ä¿å­˜ã—ãŸãœã€‚æ¬¡å›ã€Œå¾©å…ƒã€ã§å‘¼ã³æˆ»ã›ã‚‹ãã€‚");
    };
    document.getElementById("loadBtn").onclick = loadData;
    function loadData(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return alert("ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚‰ã­ã‡ãã€‚");
      try{
        const data = JSON.parse(raw);
        currentTitle = data.title||"";
        titleInput.value = currentTitle;
        titleDisplay.textContent = currentTitle ? `ï¼ˆå¸¸ã«ã‚³ãƒ¬ã‚’å¿˜ã‚Œã‚‹ãªã‚ˆï¼ï¼‰` : '';
        document.getElementById("infoMemo").value = data.info||"";
        ideaList = Array.isArray(data.ideas)?data.ideas:[];
        mindNodes = Array.isArray(data.mindNodes)?data.mindNodes:[];
        mindNodeId = typeof data.mindNodeId === "number" ? data.mindNodeId : (mindNodes.length?Math.max(...mindNodes.map(n=>n.id)):0);
        memoKeywords = extractKeywords(document.getElementById("infoMemo").value);
        updateKeywordUI();
        renderTree();
        updateParentSelect();
        renderMindMap();
        document.getElementById("summaryBox").textContent = "";
        alert("å¾©å…ƒã—ãŸãã€‚æ€è€ƒã®å®‡å®™ã€å†èµ·å‹•ã ï¼");
      }catch(e){
        alert("å¾©å…ƒã§ã‚¨ãƒ©ãƒ¼ã â€¦ãƒ‡ãƒ¼ã‚¿å£Šã‚Œã¦ã‚‹ã‹ã‚‚ã€‚");
      }
    }

    // ==== å…¨éƒ¨ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ ====
    document.getElementById("resetBtn").onclick = function() {
      if(!confirm("å…¨éƒ¨ã‚¯ãƒªã‚¢ã—ã¡ã¾ã†ãœï¼Ÿæœ¬å½“ã«ã‚„ã‚‹ã®ã‹ï¼Ÿ")) return;
      currentTitle = "";
      ideaList = [];
      mindNodes = [];
      mindNodeId = 0;
      memoKeywords = [];
      titleInput.value = "";
      document.getElementById("ideaInput").value = "";
      document.getElementById("infoMemo").value = "";
      document.getElementById("nodeInput").value = "";
      document.getElementById("parentSelect").selectedIndex = 0;
      document.getElementById("summaryBox").textContent = "";
      document.getElementById("titleDisplay").textContent = "";
      updateKeywordUI();
      renderTree();
      updateParentSelect();
      renderMindMap();
      // localStorage.removeItem(STORAGE_KEY); //å¿…è¦ãªã‚‰ãƒ‡ãƒ¼ã‚¿ã‚‚æ¶ˆå»
    };
  </script>
</body>
</html>
